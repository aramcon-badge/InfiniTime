#!/bin/bash
for FILE in $(git diff --cached --name-only)
do
	if [[ "$FILE" =~ src/[A-Za-z0-9\ \-]+*\.(c|h|cpp|cc)$ ]]; then
		echo Autoformatting $FILE with clang-format
		clang-format-11 -style=file -i -- $FILE
		git add -- $FILE
	elif [[ "$FILE" =~ src/(components|displayapp|drivers|heartratetask|logging|systemtask)/.*\.(c|h|cpp|cc)$ ]]; then
		echo Autoformatting $FILE with clang-format
		clang-format-11 -style=file -i -- $FILE
		git add -- $FILE
	fi
done
